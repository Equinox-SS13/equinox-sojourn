/mob/living/carbon/superior_animal/ant/nanite
	name = "Biomechanical ant"
	desc = "A strange, deformed mixture of an ant and some sort of technology. It seems to have a production center on its thorax."
	icon_state = "naniteroach"

	meat_type = /obj/item/reagent_containers/food/snacks/meat/roachmeat/kraftwerk/ant
	meat_amount = 3
	turns_per_move = 1
	maxHealth = 30 * ROACH_HEALTH_MOD
	health = 30 * ROACH_HEALTH_MOD

	knockdown_odds = 3
	melee_damage_lower = 1
	melee_damage_upper = 3

	blattedin_revives_left = 1

	breath_required_type = NONE
	breath_poison_type = NONE
	min_breath_required_type = 0
	min_breath_poison_type = 0

	min_air_pressure = 0
	min_bodytemperature = 0
	armor_penetration = 50
	never_stimulate_air = TRUE

	var/list/nanite_swarms = list()
	var/max_swarms = 5

/mob/living/carbon/superior_animal/ant/nanite/UnarmedAttack(atom/A, proximity)
	. = ..()

	if(isliving(A))
		var/mob/living/L = A
		if(istype(L) && prob(25) && nanite_swarms.len < max_swarms)
			var/sound/screech = pick('sound/machines/robots/robot_talk_light1.ogg','sound/machines/robots/robot_talk_light2.ogg','sound/machines/robots/robot_talk_heavy4.ogg')
			playsound(src, screech, 30, 1, -3)
			var/mob/living/simple_animal/hostile/naniteswarm/ant/M = new /mob/living/simple_animal/hostile/naniteswarm/ant(get_turf(src), src)
			nanite_swarms.Add(M)
			M.friends += friends
			say("10101010011100010101")

/mob/living/carbon/superior_animal/ant/nanite/death()
	for(var/mob/living/simple_animal/hostile/naniteswarm/ant/NS in nanite_swarms)
		nanite_swarms.Remove(NS)
		NS.gib()
	..()

/mob/living/carbon/superior_animal/ant/nanite/Destroy()
	for(var/mob/living/simple_animal/hostile/naniteswarm/ant/NS in nanite_swarms)
		nanite_swarms.Remove(NS)
		NS.gib()
	.=..()


/mob/living/simple_animal/hostile/naniteswarm/ant
	name = "nanite infested swarmling cluster"
	desc = "A swarm of disgusting ants infested with nanomachines."
	icon = 'icons/mob/mobs-roach.dmi'
	icon_state = "naniteswarm"
	icon_living = "naniteswarm"
	pass_flags = PASSTABLE
	density = FALSE
	health = 10
	maxHealth = 10
	melee_damage_lower = 1
	melee_damage_upper = 2
	attacktext = "cut"
	attack_sound = 'sound/weapons/bladeslice.ogg'
	faction = "roach"

	min_oxy = 0
	max_oxy = 0
	min_tox = 0
	max_tox = 0
	min_co2 = 0
	max_co2 = 0
	min_n2 = 0
	max_n2 = 0
	minbodytemp = 0
	cant_gib = TRUE

	var/mob/living/carbon/superior_animal/ant/nanite/parent

//If I don't put these here they break
/mob/living/simple_animal/hostile/naniteswarm/ant/New(loc, nuparent)
	..()

/mob/living/simple_animal/hostile/naniteswarm/ant/death()
	..()

/mob/living/simple_animal/hostile/naniteswarm/ant/Destroy()
	.=..()
